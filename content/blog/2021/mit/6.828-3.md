+++
title = "【MIT 6.828】3. PC 启动流程"
description = "本节学习 PC 启动的详细流程"
author = "gra55"
date = "2021-10-22"
categories = ["计算机基础"]
tags = ["MIT", "2021", "6.828"]
+++

# 0x00 非官方解读
 6.828 实验使用的是 386 CPU，但是 386 CPU 一上电以后，处于 16 位的实模式，与 8086 CPU 很相似，不清楚 8086 的可以学习文章[操作系统基础知识概览](../computer-basics/os-basic)

 CPU 一上电，CS=0xF000、IP=0xFFF0，地址为 0xFFFF0，这个地址刚好在 BIOS ROM 中，所以先执行 BIOS 中的代码。

BIOS 执行流程：
1. 上电自检（Power On Self Test）
2. 加载磁盘的第一个可引导扇区，一个扇区大小为 512 字节，如何判断该删除时可引导的？判断最后两个字节为 `0xAA55` 则表示该扇区可引导
3. BIOS 会把该扇区加载到段地址为 0x0000，偏移地址为 0x7c00 内存处
4. 然后使用跳转指令跳到 CS=0x0000、IP=0x7c00 处开始执行
5. 至此，BIOS 完成了自己的使命，把**执行流**交给了 0x7c00 处的代码，所以我们需要做的就是在磁盘的第一个扇区存放我们的代码。


# 0x01 官方解读（[Lab 1: Booting a PC](https://pdos.csail.mit.edu/6.828/2018/labs/lab1/#Introduction)）
> 实验分为三部分：
> + Part 1：主要是熟悉 x86 汇编语言、QEMU x86 仿真器和 PC 的开机引导过程
> + Part 2：主要是学习 6.828 内核的 boot 引导过程，代码的 boot 目录下
> + Part 3：主要学习 6.828 中使用的 JOS 的内核初始化模型，代码在 kern 目录下

下载代码：
```shell
athena% mkdir ~/6.828
athena% cd ~/6.828
athena% add git
athena% git clone https://pdos.csail.mit.edu/6.828/2018/jos.git lab
Cloning into lab...
athena% cd lab
athena% 
```

## Part 1: PC Bootstrap


# 0xff 参考
+ [《PC 汇编语言》 PDF 版本](../../../../static/file/pcasm-book.pdf)
+ [[MIT] 6.828 操作系统工程导读](https://zhuanlan.zhihu.com/p/368954250)